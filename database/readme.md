# 数据库面试题

## sql语句



## Mysql

- 覆盖索引

> 覆盖索引（covering index）指一个查询语句的执行只用从索引中就能够取得，不必从数据表中读取。也可以称之为实现了索引覆盖

- 回表查询

> 先通过普通索引的值定位聚簇索引值，再通过聚簇索引的值定位行记录数据，需要扫描两次索引B+树，它的性能较扫一遍索引树更低

- 索引失效

> 1、违反最左前缀法则  
> 2、在索引列上做任何操作  
> 3、使用不等于（!=、<>）  
> 4、like以通配符开头（'%abc'）  
> 5、字符串不加单引号索引失效  
> 6、or连接  

- Mysql事务

[链接](https://zhuanlan.zhihu.com/p/148035779)

- 当一个查询语句同时出现了where,group by,having,order by的时候

> 执行where xx对全表数据做筛选，返回第1个结果集  
> 针对第1个结果集使用group by分组，返回第2个结果集  
> 针对第2个结果集中的每1组数据执行select xx，有几组就执行几次，返回第3个结果集  
> 针对第3个结集执行having xx进行筛选，返回第4个结果集  
> 针对第4个结果集排序  

- 分区分表的目的

> 日常开发中我们经常会遇到大表的情况，所谓的大表是指存储了百万级乃至千万级条记录的表。这样的表过于庞大，导致数据库在查询和插入的时候耗时太长，性能低下，如果涉及联合查询的情况，性能会更加糟糕。分表和表分区的目的就是减少数据库的负担，提高数据库的效率，通常点来讲就是提高表的增删改查效率

- 什么是分区分表

> 分表是将一个大表按照一定的规则分解成多张具有独立存储空间的实体表，我们可以称为子表，每个表都对应三个文件，MYD数据文件，.MYI索引文件，.frm表结构文件。这些子表可以分布在同一块磁盘上，也可以在不同的机器上。app读写的时候根据事先定义好的规则得到对应的子表名，然后去操作它  

> 分区和分表相似，都是按照规则分解表。不同在于分表将大表分解为若干个独立的实体表，而分区是将数据分段划分在多个位置存放，可以是同一块磁盘也可以在不同的机器。分区后，表面上还是一张表，但数据散列到多个位置了  

- 水平分区和垂直分区

> 水平分区：这种形式分区是对表的行进行分区，通过这样的方式不同分组里面的物理列分割的数据集得以组合，从而进行个体分割（单分区）或集体分割（1个或多个分区）。所有在表中定义的列在每个数据集中都能找到  

> 垂直分区：这种分区方式一般来说是通过对表的垂直划分来减少目标表的宽度，使某些特定的列被划分到特定的分区，每个分区都包含了其中的列所对应的行

- 当前读和快照读

> 快照读：读取的是记录数据的可见版本（可能是过期的数据），不用加锁

> 当前读：读取的是记录数据的最新版本，并且当前读返回的记录都会加上锁，保证其他事务不会再并发的修改这条记录  

- InnoDB一棵B+树可以存放多少行数据

> [链接](https://mp.weixin.qq.com/s/xUJp62fFXC3_AJvAqQ0jZw)

- 分布式事务一致性

> [link](https://zhuanlan.zhihu.com/p/33999708)

- mysql为什么建议使用自增主键

> [link](https://blog.csdn.net/Dopamy_BusyMonkey/article/details/51601212)

## Redis

